\documentclass[tikz,border=5pt]{standalone}
\usepackage{tikz}
\usepackage{xparse}
\usepackage{musicography}

\usetikzlibrary{calc}

\newif\ifrotateKeySignatures
\newif\ifsaxKeys



\newcommand{\drawSimpleSaxDiagram}[0]{%
    \begin{tikzpicture}
      % Palm keys (green)
      \coordinate (palmKeys) at (231.5pt,50pt);
      \draw [fill=green] (palmKeys)    ellipse (0.03cm and 0.13cm)
                        +(1.7pt,5.1pt) ellipse (0.03cm and 0.13cm)
                        +(3.7pt,2.6pt) ellipse (0.03cm and 0.13cm);

      % Main finger keys (blue)
      \coordinate (mainKeys) at (227pt,50pt);
      \draw [fill=blue] (mainKeys)       circle[radius=2.268pt]
                          +(0,5.37pt)     ellipse  (0.04cm and 0.09cm)
                          +(1.02pt,-4.34pt) circle[radius=1.70pt]
                        ++(0,-9.18pt)       circle[radius=2.268pt]
                        ++(0,-5.10pt)       circle[radius=2.268pt];

      % Side keys (yellow)
      \coordinate (sideKeys) at (233pt,35pt);
      \draw [fill=yellow] (sideKeys) ellipse (0.1cm and 0.03cm)
            [rounded corners=0.025cm] ++(-2.7pt, -1.2pt) rectangle +(2.7pt, -1.7pt)
            [rounded corners=0.025cm] ++(2.7pt, 0) rectangle +(2.7pt, -1.7pt)
                  (sideKeys) +(0pt, -4.0pt) ellipse (0.1cm and 0.03cm);

      % Thumb hook (single line, not grouped)
      % \draw[] (18pt,30pt) -- ++(24pt,-10pt);

      % Auxiliary keys (green rectangles)
      \coordinate (auxKeys) at (219pt,38pt);
      \draw [fill=green,rounded corners=0.025cm]
          (auxKeys)     rectangle +(1.7pt,-4.1pt)
        ++(0pt, -4.5pt) rectangle +(1.7pt,-4.1pt)
        ++(0pt, -4.5pt) rectangle +(1.7pt,-4.1pt);

      % % Lower stack keys (cyan circles)
      \coordinate (lowerStackKeys) at (227pt,28pt);
      \draw [fill=cyan] (lowerStackKeys) circle[radius=2.268pt]
                       ++(0pt, -5.10pt)  circle[radius=2.268pt]
                       ++(0pt, -5.10pt)  circle[radius=2.268pt];

      % % Low C/Eb cluster (gray)
      \coordinate (lowClusterKeys) at (221.55pt,23pt);
      \draw [fill=gray,rounded corners=0.025cm]
        (lowClusterKeys) rectangle +(2pt,4.5pt)
           ++(1pt,-3.5pt) ellipse (0.05cm and 0.08cm);

      % Pinky keys (red)
      \coordinate (pinkyKeys) at (227pt,12pt);
      % Left pinky key (semi-circle)
      \draw [fill=red] (pinkyKeys) +(2.5pt,0pt) arc (0:180:2.5pt) -- cycle;
      \draw [fill=red] ($(pinkyKeys)-(0,0.7pt)$) +(-2.5pt,0pt) arc (180:360:2.5pt) -- cycle;

      % Right pinky key (semi-circle, shifted down)
      % \draw [fill=red]
      %   ($(pinkyKeys)-(3.4pt,-0.7pt)-(0pt,8.6pt)$)
      %     arc[start angle=180, end angle=360, radius=3.4pt] --
      %   ($(pinkyKeys)+(3.4pt,-0.7pt)-(0pt,8.6pt)$)
      %     arc[start angle=0, end angle=180, radius=3.4pt] -- cycle;
    \end{tikzpicture}
}




% Define note names
\newcommand{\simpleSaxDiagram}[1]{%
  \ifcase#1
  \or \drawSimpleSaxDiagram %D%
  \or \drawSimpleSaxDiagram %E$\flat$%
  \or \drawSimpleSaxDiagram %E%
  \or \drawSimpleSaxDiagram %F%
  \or \drawSimpleSaxDiagram %F$\sharp$%
  \or \drawSimpleSaxDiagram %G%
  \or \drawSimpleSaxDiagram %A$\flat$%
  \or \drawSimpleSaxDiagram %A%
  \or \drawSimpleSaxDiagram %B$\flat$%
  \or \drawSimpleSaxDiagram %B%
  \else ?%
  \fi
}
\newcommand{\noteName}[1]{%
  \ifcase#1
      C%
  \or D$\flat$%
  \or D%
  \or E$\flat$%
  \or E%
  \or F%
  \or F$\sharp$%
  \or G%
  \or A$\flat$%
  \or A%
  \or B$\flat$%
  \or B%
  \else ?%
  \fi
}
\newcommand{\noteNameAlt}[1]{%
  \ifcase#1
      C%
  \or D$\flat$%
  \or D%
  \or E$\flat$%
  \or E%
  \or F%
  \or G$\flat$%
  \or G%
  \or A$\flat$%
  \or A%
  \or B$\flat$%
  \or B%
  \else ?%
  \fi
}
\newcommand{\noteNameMinor}[1]{%
  \ifcase#1
      C%
  \or C$\sharp$%
  \or D%
  \or D$\sharp$%
  \or E%
  \or F%
  \or F$\sharp$%
  \or G%
  \or G$\sharp$%
  \or A%
  \or B$\flat$%
  \or B%
  \else ?%
  \fi
}

\newcommand{\sheetdistance}[1]{%
  \ifcase#1
      0.6 % -            C
  \or 0.6 % --
  \or 0.7
  \or 0.8 % --------------
  \or 0.7
  \or 0.6 % --
  \or 0.6 % -            F#
  \or 0.6 % --
  \or 0.7
  \or 0.8 % --------------
  \or 0.7
  \or 0.6 % --
  \else ?%
  \fi
}

\newcommand{\convert}[1]{%
  \ifcase#1
      0
  \or -5
  \or 2
  \or -3
  \or 4
  \or -1
  \or 6
  \or 1
  \or -4
  \or 3
  \or -2
  \or 5
  \else ?%
  \fi
}

\NewDocumentCommand{\getNote}{ O{0} m }{%
  \pgfmathtruncatemacro{\idx}{mod(#2+#1+12,12)}%
  \noteName{\idx}%
}
\NewDocumentCommand{\getNoteAlt}{ O{0} m }{%
  \pgfmathtruncatemacro{\idx}{mod(#2+#1+12,12)}%
  \noteNameAlt{\idx}%
}
\NewDocumentCommand{\getNoteAltAlt}{ O{0} m }{%
  \pgfmathtruncatemacro{\idx}{mod(#2+#1+12,12)}%
  \noteNameMinor{\idx}%
}

\def\col{blue!30}

% Define positions of sharps and flats in treble clef (relative to bottom staff line index 0)
% For y positions we use: 0=line1(E), 0.5=space1(F), 1=line2(G), 1.5=space2(A), 2=line3(B), 2.5=space3(C), 3=line4(D), 3.5=space4(E), 4=line5(F)
% Sharp order: F, C, G, D, A, E, B  -> y {4,2.5,4.8,3,1.5,3.5,2}
% flat order:  B, E, A, D, G, C, F  -> y {2,3.5,1.5,3,1,2.5,4}
\newcommand{\sharpPos}{4,2.5,4.5,3,1.5,3.5,2}
\newcommand{\flatPos}{2,3.5,1.5,3,1,2.5,4}

\def\staffWidth{49.8pt}
\def\staffStep{6.23pt}
\def\sharpAdjustment{4.09pt}
\def\flatAdjustment{3.984pt}

% Macro to draw staff and key signature (compact, with vertical lines)
\newcommand{\drawKeySignature}[1]{%
    % #1 is a pitch-class index (0..11). Use \convert to get number of accidentals.
    \begingroup
      \edef\accraw{\convert{#1}}%
      \pgfmathtruncatemacro{\acc}{\accraw}%
      \begin{tikzpicture}[baseline=(staff.base),scale=0.50,every node/.style={inner sep=0pt,outer sep=0pt}]
        \coordinate (staff) at (0,0);
        % compact staff parameters
        % short staff lines
        \foreach \y in {0,...,4}
        {\draw[line width=0.4pt] (0,\y*\staffStep) -- (\staffWidth,\y*\staffStep);}
        % thin vertical bar lines at left and right to visually bound the staff
        \draw[line width=0.4pt] (0,0) -- (0,4*\staffStep) --
                                (\staffWidth,4*\staffStep) -- (\staffWidth,0) -- cycle;
        % sharps
        \ifnum\acc>0
          \pgfmathtruncatemacro{\countacc}{\acc}
          \foreach [count=\i] \pos in \sharpPos {%
            \ifnum\i>\countacc\relax\else
              % compute x position so accidentals form a compact cluster
              \pgfmathsetmacro{\xpos}{0.25pt*(\i-1)+0.23pt}%
              \node at (\xpos,\pos*\staffStep-\sharpAdjustment) {$\musSharp$};
            \fi
          }
        \fi
        % flats
        \ifnum\acc<0
          \pgfmathtruncatemacro{\countacc}{abs(\acc)}
          \foreach [count=\i] \pos in \flatPos {%
            \ifnum\i>\countacc\relax\else
              \pgfmathsetmacro{\xpos}{0.25pt*(\i-1)+0.23pt}%
              \node at (\xpos,\pos*\staffStep-\flatAdjustment) {$\musFlat$};
            \fi
          }
        \fi
      \end{tikzpicture}
    \endgroup
}

\newcommand{\drawCircularSectors}[4]{%
  % #1 = inner radius, #2 = ring width (outer = inner + width), #3 = number of divisions, #4 = placement macro
  \pgfmathsetmacro{\innerradius}{#1}%
  \pgfmathsetmacro{\widthcircle}{#2}%
  \pgfmathsetmacro{\outerradius}{\innerradius+\widthcircle}%
  \pgfmathsetmacro{\anglestep}{360/#3}%
  \pgfmathsetmacro{\offset}{\anglestep/2}%
  \pgfmathtruncatemacro{\N}{#3-1}%
  \foreach \j in {0,...,\N} {%
      \pgfmathsetmacro{\startangle}{90-\j*\anglestep+\offset}%
      \pgfmathsetmacro{\endangle}{\startangle-\anglestep}%
      \pgfmathsetmacro{\angle}{\startangle-\anglestep/2}%
      \pgfmathsetmacro{\midradius}{\innerradius+\widthcircle/2}%

      \fill[\col]
          (\startangle:\innerradius) arc (\startangle:\endangle:\innerradius) --
          (\endangle:\outerradius) arc (\endangle:\startangle:\outerradius) -- cycle;

      \draw[thick] (\startangle:\innerradius) -- (\startangle:\outerradius);
      \draw[thick] (\endangle:\innerradius) -- (\endangle:\outerradius);

      #4{\j}{\angle}{\midradius}{\outerradius}%
  }

  % Draw circles
  \draw[thick] (0,0) circle (\outerradius);
  \draw[thick] (0,0) circle (\innerradius);
}

\def\saxnotesdistance{0.15}

\newcommand{\sectorNodeDefault}[4]{%
  % #1 index, #2 angle, #3 midradius, #4 outerradius
  \pgfmathtruncatemacro{\pc}{mod(7*#1,12)}%
  \def\note{\getNote{\pc}}%
  \def\saxnote{\getNoteAlt[-2]{\pc}}%

  \ifrotateKeySignatures
    \node[font=\bfseries\large, inner sep=-1.8pt, rotate=#2-\counterrotation] (main) at (#2:#3+\labeloffset) {\note};
    \node[font=\scriptsize, anchor=north, rotate=#2-\counterrotation, text=white!30!black] at (main.south) {\saxnote};
  \else
    \node[font=\bfseries\large, inner sep=-1.8pt] (main) at (#2:#3) {\note};
    \node[font=\scriptsize, anchor=north, text=white!30!black] at (main.south) {\saxnote};
  \fi

  \ifrotateKeySignatures
    \node[anchor=base, rotate=#2-\counterrotation, shift={(0,-\staffStep)}] at (#2:{\rotatedsheetdistance+#4}) {\drawKeySignature{\pc}};
  \else
    \node[anchor=base, yshift={-1*\staffStep}] at (#2:{\sheetdistance{\j}+#4}) {\drawKeySignature{\pc}};
  \fi

  \ifsaxKeys
    \node[anchor=base, rotate=#2-\counterrotation, shift={(0,-\staffStep)}] at (#2:{\saxnotesdistance+2*\rotatedsheetdistance+#4}) {\simpleSaxDiagram{\pc}};
  \fi
}

\newcommand{\innerSectorNoteMinor}[4]{%
  \pgfmathtruncatemacro{\pc}{mod(7*#1 + 9,12)}%
  \def\note{\getNoteAltAlt{\pc}}%

  \ifrotateKeySignatures
    \node[font=\bfseries\large, inner sep=-1.8pt, rotate=#2-\counterrotation] at (#2:#3) {\small \note m};
  \else
    \node[font=\bfseries\large, inner sep=-1.8pt] at (#2:#3) {\small \note m};
  \fi
}

\begin{document}
\rotateKeySignaturestrue
\saxKeysfalse
\def\rotatedsheetdistance{0.4}
\def\counterrotation{90}
\def\labeloffset{0.055}
\begin{tikzpicture}
\drawCircularSectors{2.1pt}{1.0pt}{12}{\sectorNodeDefault}
\drawCircularSectors{1.5pt}{0.6pt}{12}{\innerSectorNoteMinor}
\end{tikzpicture}
\newpage
\rotateKeySignaturestrue
\saxKeystrue
\def\rotatedsheetdistance{0.6}
\def\counterrotation{0}
\def\labeloffset{0}
\begin{tikzpicture}
\drawCircularSectors{2.1pt}{1.0pt}{12}{\sectorNodeDefault}
\drawCircularSectors{1.2pt}{0.9pt}{12}{\innerSectorNoteMinor}
\end{tikzpicture}
\newpage
\begin{tikzpicture}
\rotateKeySignaturesfalse
\saxKeysfalse
\def\labeloffset{0}
\drawCircularSectors{2.1pt}{1.0pt}{12}{\sectorNodeDefault}
\drawCircularSectors{1.3pt}{0.8pt}{12}{\innerSectorNoteMinor}
\end{tikzpicture}

\end{document}
