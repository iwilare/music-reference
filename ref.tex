\documentclass[tikz,border=5pt]{standalone}
\usepackage{tikz}
\usepackage{xparse}
\usetikzlibrary{calc}

% Define note names
\newcommand{\noteName}[1]{%
  \ifcase#1
      C%
  \or D$\flat$%
  \or D%
  \or E$\flat$%
  \or E%
  \or F%
  \or F$\sharp$%
  \or G%
  \or A$\flat$%
  \or A%
  \or B$\flat$%
  \or B%
  \else ?%
  \fi
}
\newcommand{\noteNameAlt}[1]{%
  \ifcase#1
      C%
  \or D$\flat$%
  \or D%
  \or E$\flat$%
  \or E%
  \or F%
  \or G$\flat$%
  \or G%
  \or A$\flat$%
  \or A%
  \or B$\flat$%
  \or B%
  \else ?%
  \fi
}

\newcommand{\convert}[1]{%
  \ifcase#1
      0
  \or -5
  \or 2
  \or -3
  \or 4
  \or -1
  \or 6
  \or 1
  \or -4
  \or 3
  \or -2
  \or 5
  \else ?%
  \fi
}

\NewDocumentCommand{\getNote}{ O{0} m }{%
  \pgfmathtruncatemacro{\idx}{mod(#2+#1+12,12)}%
  \noteName{\idx}%
}
\NewDocumentCommand{\getNoteAlt}{ O{0} m }{%
  \pgfmathtruncatemacro{\idx}{mod(#2+#1+12,12)}%
  \noteNameAlt{\idx}%
}

\def\col{blue!30}

% distance of small key signatures from outer circle
\def\keySigDistance{1.2}

% Define positions of sharps and flats in treble clef (relative to bottom staff line index 0)
% For y positions we use: 0=line1(E), 0.5=space1(F), 1=line2(G), 1.5=space2(A), 2=line3(B), 2.5=space3(C), 3=line4(D), 3.5=space4(E), 4=line5(F)
% Sharp order: F, C, G, D, A, E, B  -> y {4,2.5,4.8,3,1.5,3.5,2}
% Flat order:  B, E, A, D, G, C, F  -> y {2,3.5,1.5,3,1,2.5,4}
\newcommand{\sharpPos}{4.05,2.5,4.8,3,1.5,3.5,2}
\newcommand{\flatPos}{2,3.5,1.5,3,1,2.5,4}

% Macro to draw staff and key signature (compact, with vertical lines)
\newcommand{\drawKeySignature}[1]{%
    % #1 is a pitch-class index (0..11). Use \convert to get number of accidentals.
    \begingroup
      \edef\accraw{\convert{#1}}%
      \pgfmathtruncatemacro{\acc}{\accraw}%
      \begin{tikzpicture}[baseline=(staff.base),scale=0.50,every node/.style={inner sep=0pt,outer sep=0pt}]
        \coordinate (staff) at (0,0);
        % compact staff parameters
        \def\staffwidth{1.75}
        \def\ystep{0.219}
        % short staff lines
        \foreach \y in {0,...,4} {\draw (0,\y*\ystep) -- (\staffwidth,\y*\ystep);}
        % thin vertical bar lines at left and right to visually bound the staff
        \draw[line width=0.4pt] (0,-0.02) -- (0,4*\ystep+0.02);
        \draw[line width=0.4pt] (\staffwidth,-0.02) -- (\staffwidth,4*\ystep+0.02);
        % sharps
        \ifnum\acc>0
          \pgfmathtruncatemacro{\countacc}{\acc}
          \foreach [count=\i] \pos in \sharpPos {%
            \ifnum\i>\countacc\relax\else
              % compute x position so accidentals form a compact cluster
              \pgfmathsetmacro{\xpos}{0.25*(\i-1)+0.23}%
              \node at (\xpos,\pos*\ystep+0.02) {\small$\sharp$};
            \fi
          }
        \fi
        % flats
        \ifnum\acc<0
          \pgfmathtruncatemacro{\countacc}{abs(\acc)}
          \foreach [count=\i] \pos in \flatPos {%
            \ifnum\i>\countacc\relax\else
              \pgfmathsetmacro{\xpos}{0.25*(\i-1)+0.23}%
              \node at (\xpos,\pos*\ystep+0.09) {\small$\flat$};
            \fi
          }
        \fi
      \end{tikzpicture}
    \endgroup
}

\newcommand{\drawCircularSectors}[4]{%
  % #1 = inner radius, #2 = ring width (outer = inner + width), #3 = number of divisions, #4 = placement macro
  \pgfmathsetmacro{\innerradius}{#1}%
  \pgfmathsetmacro{\widthcircle}{#2}%
  \pgfmathsetmacro{\outerradius}{\innerradius+\widthcircle}%
  \pgfmathsetmacro{\anglestep}{360/#3}%
  \pgfmathsetmacro{\offset}{\anglestep/2}%
  \pgfmathtruncatemacro{\N}{#3-1}%
  \foreach \j in {0,...,\N} {%
      \pgfmathsetmacro{\startangle}{90-\j*\anglestep+\offset}%
      \pgfmathsetmacro{\endangle}{\startangle-\anglestep}%
      \pgfmathsetmacro{\midangle}{\startangle-\anglestep/2}%
      \pgfmathsetmacro{\midradius}{\innerradius+\widthcircle/2}%

      % Draw sector
      \fill[\col]
          (\startangle:\innerradius) arc (\startangle:\endangle:\innerradius) --
          (\endangle:\outerradius) arc (\endangle:\startangle:\outerradius) -- cycle;

      % Sector lines
      \draw[thick] (\startangle:\innerradius) -- (\startangle:\outerradius);
      \draw[thick] (\endangle:\innerradius) -- (\endangle:\outerradius);

      % Call the user-supplied per-sector content macro
      % Macro signature: #4{<sector-index>}{<midangle>}{<midradius>}
      #4{\j}{\midangle}{\midradius}%
  }

  % Draw circles
  \draw[thick] (0,0) circle (\outerradius);
  \draw[thick] (0,0) circle (\innerradius);
}

% Default per-sector content: compute note and sax label locally from the sector index
\newcommand{\sectorNodeDefault}[3]{%
  % #1 index, #2 midangle, #3 midradius
  % compute pitch-class from index: 7*j mod 12
  \pgfmathtruncatemacro{\notenumber}{7*#1}%
  \pgfmathtruncatemacro{\pc}{mod(\notenumber,12)}%
  \def\note{\getNote{\notenumber}}%
  \def\saxnote{\getNoteAlt[-2]{\notenumber}}%
  \node[font=\bfseries\large, inner sep=-1.8pt] (main) at (#2:#3) {\note};
  \node[font=\scriptsize, anchor=north, text=white!30!black] at (main.south) {\saxnote};
  % place compact key signature slightly further out and centered
  \node[anchor=center] at (#2:{#3+\keySigDistance}) {\drawKeySignature{\pc}};
}

\newcommand{\innerSectorNote}[3]{%
  % #1 index, #2 midangle, #3 midradius
  \pgfmathtruncatemacro{\notenumber}{7*#1}%
  \def\note{\getNote{\notenumber}}%
  \node[font=\bfseries\large, inner sep=-1.8pt] at (#2:#3) {\note};
}

\begin{document}
\begin{tikzpicture}
% draw an inner ring and an outer ring using the same sector content macro (explicit divisions, now pass width){1.4}{2.4}
\drawCircularSectors{1.4}{1.0}{12}{\sectorNodeDefault}
%\drawCircularSectors{3.4}{1.0}{24}{\innerSectorNote}
\end{tikzpicture}
\end{document}
